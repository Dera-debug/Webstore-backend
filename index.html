<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap and Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <title>Petstore App</title>
</head>
<body class="bg-light text-dark">
    <div id="app" class="container my-5">

        <!-- Header -->
        <header class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="text-primary">{{ sitename }}</h1>
            <button class="btn btn-primary" v-on:click="showCheckout">
                <span class="me-2">{{ itemsInTheCart }}</span>
                <i class="fa-solid fa-cart-shopping"></i> Checkout
            </button>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Product View -->
            <div v-if="showProduct" class="card mb-4 p-3">
                <div class="row g-3">
                    <div class="col-md-4">
                        <img v-bind:src="product.image" class="img-fluid" style="width: 100%; height: auto;">
                    </div>
                    <div class="col-md-8">
                        <h2 v-text="product.title" class="text-primary mb-3"></h2>
                        <p v-text="product.description" class="text-secondary mb-2"></p>
                        <p><strong>Price:</strong> ${{ product.price }}</p>

                        <button 
                            class="btn btn-warning mt-3" 
                            v-if="canAddToTheCart" 
                            v-on:click="addItemToTheCart">
                            Add to Cart
                        </button>
                        <button class="btn btn-secondary mt-3" v-else disabled>
                            Add to Cart (Out of Stock)
                        </button>
                    </div>
                </div>
            </div>

            <!-- Checkout Page -->
            <div v-else>
                <h1 class="text-primary">Welcome to the Checkout page</h1>
                <form @submit.prevent="submitCheckOutForm">
                    <div class="mb-3">
                        <label for="name" class="form-label"><strong>Name:</strong></label>
                        <input type="text" v-model.trim="order.name" class="form-control" id="name">
                    </div>
                    <div class="mb-3">
                        <label for="surname" class="form-label"><strong>Surname:</strong></label>
                        <input type="text" v-model.trim="order.surname" class="form-control" id="surname">
                    </div>
                    <div class="mb-3">
                        <label for="address" class="form-label"><strong>Address:</strong></label>
                        <input type="text" v-model.trim="order.Address" class="form-control" id="address">
                    </div>
                    <div class="mb-3">
                        <label for="state" class="form-label"><strong>State:</strong></label>
                        <select v-model="order.State" class="form-select" id="state">
                            <option disabled>Select State</option>
                            <option v-for="(state, key) in states" :value="state">{{ key }}</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="zip" class="form-label"><strong>Zip/Postal Code:</strong></label>
                        <input type="number" v-model.number="order.Zip" class="form-control" id="zip">
                    </div>
                    <div class="form-check mb-3">
                        <input type="checkbox" id="gift" class="form-check-input" v-model="order.gift">
                        <label class="form-check-label" for="gift">Send as a gift?</label>
                    </div>
                    <div class="mb-3">
                        <input type="radio" id="home" value="Home" v-model="order.method" class="form-check-input">
                        <label class="form-check-label" for="home">Home</label>
                        <input type="radio" id="business" value="Business" v-model="order.method" class="form-check-input ms-3">
                        <label class="form-check-label" for="business">Business</label>
                    </div>
                    <button type="submit" class="btn btn-primary">Place Order</button>
                </form>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
    <script>
        let webstore = new Vue({
            el: "#app",
            data: {
                sitename: "Pet Store App",
                showProduct: true,
                product: {
                    id: 1001,
                    title: "Cat Food, 25lb bag",
                    description: "A 25 pound bag of irresistible, organic goodness for your cat.",
                    price: 2000,
                    image: "images/product-fullsize.jpg",
                    availableInventory: 5
                },
                cart: [],
                order: {
                    name: "",
                    surname: "",
                    Address: "",
                    State: "",
                    Zip: "",
                    gift: "Do not send as a gift",
                    method: "Home"
                },
                states: {
                    AL: "Alabama",
                    AR: "Arizona",
                    CA: "California",
                    NV: "Nevada"
                }
            },
            methods: {
                showCheckout() {
                    this.showProduct = !this.showProduct;
                },
                addItemToTheCart() {
                    this.cart.push(this.product.id);
                },
                submitCheckOutForm() {
                    alert("Congratulations, order submitted :)");
                }
            },
            computed: {
                itemsInTheCart() {
                    return this.cart.length || "";
                },
                canAddToTheCart() {
                    return this.product.availableInventory > this.itemsInTheCart;
                }
            }
        });
    </script>
</body>
</html>
